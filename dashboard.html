<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orderly • Dashboard</title>
    <meta name="description" content="Orderly dashboard and task manager">
    <link rel="preload" href="styles/main.css" as="style">
    <link rel="modulepreload" href="scripts/main.js">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/responsive.css">
    <link rel="icon" type="image/svg+xml" href="assets/images/favicon.svg">
    <style>
      /* Ensure the app is the primary section on this page */
      .section { display: none; }
      #app.section { display: block; }
      
      /* Apply homepage dark background to dashboard */
      body, .main, #app {
        background: linear-gradient(135deg, var(--dark-bg) 0%, var(--darker-bg) 100%);
        background-attachment: fixed;
        min-height: 100vh;
        color: var(--white);
      }

      /* Make sections inside #app transparent so the dark bg shows through */
      #app .section {
        background: transparent;
        padding: var(--space-12) 0;
      }
      
      /* Hide all subsections inside #app by default, only show active one */
      #app > .app-section {
        display: none;
      }
      
      #app > .app-section.active {
        display: block;
      }

      /* Use glass-effect appearance on dashboard cards instead of white backgrounds */
      #app .glass-effect {
        /* slightly more opaque glass for improved contrast */
        background: rgba(255,255,255,0.14);
        border: 1px solid rgba(255,255,255,0.18);
        box-shadow: 0 12px 36px rgba(0,0,0,0.45);
        color: var(--white);
      }

      /* Header should remain dark on the dashboard even when JS adds .light */
      .header.light .nav-container {
        background: rgba(255, 255, 255, 0.08) !important;
        border-color: rgba(255, 255, 255, 0.12) !important;
      }

      .header.light .nav-link,
      .header.light .tagline,
      .header.light .logo h1,
      .header.light .hamburger {
        color: var(--white) !important;
      }
      
      /* Make stat cards pop more */
      #app .stat-card {
        background: rgba(255,255,255,0.12);
        border: 1px solid rgba(255,255,255,0.2);
        box-shadow: 0 14px 48px rgba(0,0,0,0.5);
        color: var(--white);
      }
      
      #app .stat-content h3 {
        color: rgba(255,255,255,0.85);
      }
      
      #app .stat-number {
        color: var(--white);
      }
      
      /* Make dashboard title and labels clearly visible */
      #app .section-title {
        color: var(--white);
        text-shadow: 0 4px 18px rgba(0,0,0,0.6);
      }

      /* Cap/target label and input contrast */
      .cap-label {
        color: rgba(255,255,255,0.9);
      }

      .cap-input {
        background: rgba(255,255,255,0.95);
        color: var(--gray-900);
        border: 1px solid rgba(0,0,0,0.12);
      }
      
      /* Weekly goal: make it stand out */
      #app .cap-section {
        background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
        border: 1px solid rgba(255,255,255,0.14);
        padding: var(--space-6);
        border-radius: var(--radius-xl);
        margin-bottom: var(--space-6);
      }

      #app .cap-section h3 {
        color: var(--white);
        margin-bottom: var(--space-3);
      }

      /* Recent tasks panel removed from dashboard; generic preview styles retained in main stylesheet */
      
      /* Settings page contrast improvements */
      #settings .settings-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
        gap: var(--space-8);
        max-width: 1000px;
        margin: 0 auto;
      }
      
      #settings .settings-card {
        background: rgba(255,255,255,0.18);
        border: 1px solid rgba(255,255,255,0.25);
        padding: var(--space-8);
        border-radius: var(--radius-xl);
      }
      
      #settings .settings-card h3 {
        color: var(--white);
        font-weight: 600;
        margin-bottom: var(--space-6);
        font-size: 1.3rem;
        padding-bottom: var(--space-3);
        border-bottom: 2px solid rgba(255,255,255,0.2);
      }
      
      #settings .settings-group {
        margin-bottom: var(--space-6);
      }
      
      #settings .settings-group:last-child {
        margin-bottom: 0;
      }
      
      #settings .settings-label {
        color: rgba(255,255,255,0.95);
        font-weight: 500;
        display: block;
        margin-bottom: var(--space-2);
      }
      
      #settings .settings-description {
        color: rgba(255,255,255,0.75);
        font-size: 0.9rem;
        margin-top: var(--space-2);
      }
      
      /* Form controls on settings page - high contrast */
      #settings .select,
      #settings .file-input {
        background: rgba(255,255,255,0.95);
        color: var(--gray-900);
        border: 1px solid rgba(255,255,255,0.3);
        width: 100%;
        padding: var(--space-3);
        border-radius: var(--radius-md);
        font-size: 1rem;
      }
      
      #settings .select option {
        background: var(--white);
        color: var(--gray-900);
      }
      
      /* Checkbox labels on settings */
      #settings .checkbox-label {
        color: rgba(255,255,255,0.95);
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: var(--space-2);
      }
      
      #settings .checkbox {
        width: 18px;
        height: 18px;
      }
      
      /* Button text visibility */
      #settings .btn {
        font-weight: 600;
      }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header class="header" role="banner">
      <nav class="nav" role="navigation" aria-label="Main navigation">
        <div class="nav-container">
          <div class="logo">
            <div>
              <h1 id="logo-text">Orderly</h1>
              <span class="tagline"></span>
            </div>
          </div>
          <ul class="nav-menu" role="menubar">
            <li role="none"><a href="index.html#hero" role="menuitem" class="nav-link">Home</a></li>
            <li role="none"><a href="#dashboard" role="menuitem" class="nav-link">Dashboard</a></li>
            <li role="none"><a href="tasks.html#tasks" role="menuitem" class="nav-link">Tasks</a></li>
            <li role="none"><a href="settings.html" role="menuitem" class="nav-link">Settings</a></li>
            <li role="none"><a href="#about" role="menuitem" class="nav-link">About</a></li>
          </ul>
        </div>
      </nav>
    </header>

    <main id="main-content" class="main" role="main">
      <section id="app" class="section active">
        <section id="dashboard" class="app-section active" aria-labelledby="dashboard-heading">
          <div class="container">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
              <h2 id="dashboard-heading" class="section-title">Dashboard</h2>
              <div style="display:flex;gap:8px;align-items:center">
                <!-- Recent tasks dropdown removed per user request -->
              </div>
            </div>
            <div class="stats-grid">
              <div class="stat-card glass-effect">
                <div class="stat-content">
                  <h3>Total Tasks</h3>
                  <p class="stat-number" id="total-tasks">0</p>
                </div>
              </div>
              <div class="stat-card glass-effect">
                <div class="stat-content">
                  <h3>Total Duration</h3>
                  <p class="stat-number" id="total-duration">0h 0m</p>
                </div>
              </div>
              <div class="stat-card glass-effect">
                <div class="stat-content">
                  <h3>Top Tag</h3>
                  <p class="stat-number" id="top-tag">-</p>
                </div>
              </div>
              <div class="stat-card glass-effect">
                <div class="stat-content">
                  <h3>This Week</h3>
                  <p class="stat-number" id="week-tasks">0</p>
                </div>
              </div>
              <div class="stat-card glass-effect">
                <div class="stat-content">
                  <h3>Completed</h3>
                  <p class="stat-number" id="completed-tasks">0</p>
                </div>
              </div>
            </div>

            <div class="cap-section glass-effect">
              <h3>Weekly Goal</h3>
              <div class="cap-controls">
                <label for="duration-cap" class="cap-label">Set weekly duration target (<span id="cap-unit-label">hours</span>):</label>
                <input type="number" id="duration-cap" class="cap-input" min="0" step="0.5" value="40">
                <button id="update-cap" class="btn btn-primary">Update</button>
              </div>
              <div id="cap-status" class="cap-status" role="status" aria-live="polite"></div>
              <div class="weekly-chart" style="margin-top:12px">
                <div class="chart-wrap" style="position:relative">
                  <canvas id="weekly-progress-canvas" aria-label="Weekly progress chart" style="width:100%;height:160px;display:block"></canvas>
                  <div id="weekly-chart-tooltip" style="position:absolute;pointer-events:none;display:none;background:rgba(0,0,0,0.78);color:#fff;padding:6px 8px;border-radius:6px;font-size:12px;z-index:20"></div>
                </div>
              </div>
            </div>

            
            <!-- Today's Tasks: highest priority by duration -->
            <div class="todays-tasks glass-effect">
              <h3>Today's Tasks (Longest First)</h3>
              <div id="todays-tasks-list" class="tasks-preview"></div>
            </div>
          </div>
        </section>

        <section id="tasks" class="app-section" aria-labelledby="tasks-heading">
          <div class="container">
            <h2 id="tasks-heading" class="section-title">Your Tasks</h2>
            <div class="controls glass-effect">
              <div class="search-container">
                <label for="search-input" class="search-label">Search Tasks:</label>
                <input type="text" id="search-input" class="search-input" placeholder="Enter search pattern...">
                <div class="search-options">
                  <label class="checkbox-label">
                    <input type="checkbox" id="case-sensitive" class="checkbox">
                    Case sensitive
                  </label>
                  <button id="clear-search" class="btn btn-secondary">Clear</button>
                </div>
              </div>
              <div class="filter-controls">
                <label for="sort-select" class="filter-label">Sort by:</label>
                <select id="sort-select" class="select">
                  <option value="date-desc">Date (Newest First)</option>
                  <option value="date-asc">Date (Oldest First)</option>
                  <option value="title-asc">Title (A-Z)</option>
                  <option value="title-desc">Title (Z-A)</option>
                  <option value="duration-desc">Duration (Longest First)</option>
                  <option value="duration-asc">Duration (Shortest First)</option>
                  <option value="tag-asc">Tag (A-Z)</option>
                </select>
                <label for="tag-filter" class="filter-label">Filter by tag:</label>
                <select id="tag-filter" class="select">
                  <option value="">All Tags</option>
                </select>
              </div>
            </div>
            <div class="tasks-container">
              <div id="tasks-loading" class="loading" aria-live="polite">Loading tasks...</div>
              <div id="empty-state" class="empty-state" style="display:none;">
                <h3>No tasks found</h3>
                <p>Start by adding your first task or adjust your search criteria.</p>
                <a href="tasks.html#add-task" class="btn btn-primary">Add Task</a>
              </div>
              <div id="tasks-grid" class="tasks-grid"></div>
            </div>
          </div>
        </section>

        <!-- Add Task moved to tasks.html -->
        <!-- Settings moved to settings.html -->

        <section id="about" class="app-section" aria-labelledby="about-heading">
          <div class="container">
            <h2 id="about-heading" class="section-title">About Campus Life Planner</h2>
            <div class="about-content glass-effect">
              <div class="about-hero">
                <h3>Your Academic Journey Companion</h3>
                <p>Campus Life Planner helps you organize your academic tasks, track your progress, and stay on top of your deadlines. Built with accessibility and usability in mind, this tool empowers students to take control of their academic life.</p>
              </div>
            </div>
          </div>
        </section>
      </section>
    </main>

    <footer class="footer" role="contentinfo">
      <div class="container">
        <div class="footer-content">
          <p>&copy; 2024 Campus Life Planner. Built with ❤️ for students everywhere.</p>
          <div class="footer-links">
            <a href="#about">About</a>
            <a href="settings.html">Settings</a>
            <a href="https://github.com/your-username" target="_blank" rel="noopener">GitHub</a>
          </div>
        </div>
      </div>
    </footer>

    <div id="confirm-modal" class="modal" role="dialog" aria-labelledby="modal-title" aria-hidden="true">
      <div class="modal-backdrop"></div>
      <div class="modal-content glass-effect">
        <h3 id="modal-title">Confirm Action</h3>
        <p id="modal-message">Are you sure you want to proceed?</p>
        <div class="modal-actions">
          <button id="modal-confirm" class="btn btn-primary">Confirm</button>
          <button id="modal-cancel" class="btn btn-secondary">Cancel</button>
        </div>
      </div>
    </div>

    <script type="module" src="scripts/main.js"></script>
</body>
</html>

